# Lab S

## 学号 姓名

PB20000277 孙昊哲

## 实验目的

本次实验通过使用C++来模拟运行LC3汇编代码

## 实验设计

本次设计的虚拟机类包含内存`memory_tp mem`和寄存器`register_tp reg`两个变量，用于存储寄存器的内存数据和寄存器数据，并且通过设计一些列函数变量来读取源文件中的程序指令，并将他们依次执行。

* 我们首先将程序存储到对应的内存位置
* 然后根据当前PC值读取对应内存中的指令，并且通过模拟器运行相应的指令
* 我们模拟器现将指令的`opcode`读取出来，根据不同的`opcode`跳转到对应的部分，最后对内存或者寄存器进行操作

我们使用程序来模拟实际的LC3指令的机器（是否存在？）运行

## 实验结果

我们程序可以接受的命令行如下图所示
![截屏2023-01-15 下午10.54.37](https://raw.githubusercontent.com/expecto347/Img/main/202301152254859.png)

最后我们可以正确翻译对应的程序，并且模拟器会输出寄存器的详细信息，以及可以指定单步或者多步运行，详情可以参考如下的[视频](https://raw.githubusercontent.com/expecto347/Img/main/202301080021523.mov)。

## 实验反馈

* 本次实验在安装boost的过程中出现了极大的困难，建议助教优化这一部分的代码，因为我们的本次实验也不是必需要使用boost库，建议助教可以将使用到的boost的相关代码直接添加在实验框架下的`lib`文件夹中即可
* 本次实验是一个体力活，需要注重跳转指令的使用即可